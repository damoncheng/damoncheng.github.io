
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>  （原创）Linux下MySQL 5.5/5.6的修改字符集编码为UTF8（彻底解决中文乱码问题）</title>
	
			<script type="text/javascript">//<![CDATA[
			// Google Analytics for WordPress by Yoast v4.2.8 | http://yoast.com/wordpress/google-analytics/
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-9805403-2']);
							_gaq.push(['_setCustomVar',2,'post_type','post',3],['_setCustomVar',3,'author','谋万世全局者',3],['_setCustomVar',4,'tags','5-5 linux mysql utf8 %e4%b8%ad%e6%96%87%e4%b9%b1%e7%a0%81 %e',3],['_setCustomVar',5,'categories','linux mysql-database unix %e4%b8%aa%e4%ba%ba%e6%97%a5%',3],['_trackPageview']);
			(function () {
				var ga = document.createElement('script');
				ga.type = 'text/javascript';
				ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(ga, s);
			})();
			//]]></script>
			<link rel="alternate" type="application/rss+xml" title="服务器运维与网站架构|Linux运维|X研究 &raquo; （原创）Linux下MySQL 5.5/5.6的修改字符集编码为UTF8（彻底解决中文乱码问题） 评论 Feed" href="http://www.ha97.com/5359.html/feed" />
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://www.ha97.com/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<script type='text/javascript' src='http://www.ha97.com/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://www.ha97.com/wp-includes/js/jquery/jquery.js?ver=1.6.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.ha97.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.ha97.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='服务器运维与网站架构|Linux运维|X研究' href='http://www.ha97.com' />
<link rel='start' title='LNMPW on VPS！' href='http://www.ha97.com/1.html' />
<link rel='prev' title='OpenStack、CloudStack、Eucalyptus、vCloud Director等主流云管理系统简介' href='http://www.ha97.com/5199.html' />
<link rel='next' title='（总结）CentOS Linux 5.x在GPT分区不能引导的解决方法' href='http://www.ha97.com/5365.html' />
<meta name="generator" content="WordPress 3.2.1" />
<link rel='canonical' href='http://www.ha97.com/5359.html' />
<link rel='shortlink' href='http://www.ha97.com/?p=5359' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css" media="screen">
	@import url( http://www.ha97.com/wp-content/themes/tes-cn-release/style.css);
	</style>
	<link rel="shortcut icon" type="image/ico" href="http://www.ha97.com/wp-content/themes/tes-cn-release/tes/favicon.gif" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.ha97.com/feed" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="http://www.ha97.com/feed/rss" />
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://www.ha97.com/feed/atom" />
	<link rel="pingback" href="http://www.ha97.com/xmlrpc.php" />		
	<link rel="shortcut icon" href="favicon.ico"> 
   
</head>
<body>

</div>			<div class="post clearfix">
				<p><strong>PS：昨天一同事遇到<a href="http://www.ha97.com/category/database/mysql-database">mysql</a> 5.5中文乱码问题，找我解决。解决了，有个细节问题网上没人说，我就总结一下。</strong></p>
<p>一、登录<a href="http://www.ha97.com/tag/mysql">MySQL</a>查看用SHOW VARIABLES LIKE &#8216;character%&#8217;;下字符集，显示如下：<br />
<code><br />
+--------------------------+----------------------------+<br />
| Variable_name            | Value                      |<br />
+--------------------------+----------------------------+<br />
| character_set_client     | utf8                       |<br />
| character_set_connection | utf8                       |<br />
| character_set_database   | latin1                     |<br />
| character_set_filesystem | binary                     |<br />
| character_set_results    | utf8                       |<br />
| character_set_server     | latin1                     |<br />
| character_set_system     | utf8                       |<br />
| character_sets_dir       | /usr/share/mysql/charsets/ |<br />
+--------------------------+----------------------------+<br />
</code><br />
character_set_database和character_set_server的默认字符集还是latin1。</p>
<p>二、最简单的完美修改方法，修改mysql的<a href="http://www.ha97.com/tag/my-cnf">my.cnf</a>文件中的字符集键值（<strong>注意配置的字段细节</strong>）：<br />
<span id="more-5359"></span><br />
1、在[client]字段里加入default-character-set=utf8，如下：<br />
<code><br />
[client]<br />
port            = 3306<br />
socket          = /var/lib/mysql/mysql.sock<br />
default-character-set=utf8<br />
</code><br />
2、在[mysqld]字段里加入character-set-<a href="http://www.ha97.com/tag/server">server</a>=utf8，如下：<br />
<code><br />
[mysqld]<br />
port            = 3306<br />
socket          = /var/lib/mysql/mysql.sock<br />
character-set-server=utf8<br />
</code><br />
3、在[mysql]字段里加入default-character-set=utf8，如下：<br />
<code><br />
[mysql]<br />
no-auto-rehash<br />
default-character-set=utf8<br />
</code><br />
修改完成后，service mysql restart重启mysql服务就生效。注意：[mysqld]字段与[mysql]字段是有区别的。这点在网上没人反馈过。</p>
<p>使用SHOW VARIABLES LIKE &#8216;character%&#8217;;查看，发现数据库编码全已改成utf8。<br />
<code><br />
+--------------------------+----------------------------+<br />
| Variable_name            | Value                      |<br />
+--------------------------+----------------------------+<br />
| character_set_client     | utf8                       |<br />
| character_set_connection | utf8                       |<br />
| character_set_database   | utf8                       |<br />
| character_set_filesystem | binary                     |<br />
| character_set_results    | utf8                       |<br />
| character_set_server     | utf8                       |<br />
| character_set_system     | utf8                       |<br />
| character_sets_dir       | /usr/share/mysql/charsets/ |<br />
+--------------------------+----------------------------+<br />
</code><br />
<a href="http://www.ha97.com/wp-content/uploads/2013/01/mysql-utf8.jpg" ><img src="http://www.ha97.com/wp-content/uploads/2013/01/mysql-utf8.jpg" alt="" title="mysql-utf8" width="660" height="335" class="alignnone size-full wp-image-5363" /></a><br />
4、如果上面的都修改了还乱码，那剩下问题就一定在connection连接层上。解决方法是在发送查询前执行一下下面这句（直接写在SQL文件的最前面）：<br />
<code>SET NAMES 'utf8';</code></p>
<p>它相当于下面的三句指令：<br />
<code><br />
SET character_set_client = utf8;<br />
SET character_set_results = utf8;<br />
SET character_set_connection = utf8;<br />
</code><br />
<a href="http://www.ha97.com/wp-content/uploads/2013/01/mysql-t_area.jpg" ><img src="http://www.ha97.com/wp-content/uploads/2013/01/mysql-t_area.jpg" alt="" title="mysql-t_area" width="801" height="559" class="alignnone size-full wp-image-5364" /></a><br />
网上很多其他方法不能彻底解决这个问题，这个可以完美解决！</p>							</div>

			<p class="postendmeta">
			<a href="http://www.ha97.com/5359.html" rel="bookmark" title="（原创）Linux下MySQL 5.5/5.6的修改字符集编码为UTF8（彻底解决中文乱码问题）" class="permalink">永久链接</a> : http://www.ha97.com/5359.html			</p>
		</div>
	
<!-- You can start editing here. -->


	
	

</body>
</html>
